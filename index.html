<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fredbear555Ai.com - Universal Hybrid Intelligence</title>
    <meta name="description" content="Fredbear555Ai.com - Advanced Hybrid Intelligence with Deep Research, Image & Video Generation.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #ffffff; color: #0f172a; overflow: hidden; }
        code { font-family: 'JetBrains Mono', monospace; }
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Markdown Styles */
        .md-content pre { background: #1e293b; color: #f8fafc; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin: 0.5rem 0; font-size: 0.85em; }
        .md-content code { background: #f1f5f9; padding: 0.1rem 0.3rem; border-radius: 0.25rem; font-size: 0.875em; color: #ea580c; font-weight: 600; }
        .md-content p { margin-bottom: 0.75rem; line-height: 1.6; }
        .md-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 0.75rem; }
        .md-content strong { font-weight: 700; color: #000; }
        .md-content h1, .md-content h2, .md-content h3 { font-weight: 700; margin-top: 1em; margin-bottom: 0.5em; color: #111; }

        /* Custom Mode Toggles */
        .mode-btn { transition: all 0.2s; border: 1px solid transparent; }
        .mode-btn.active { background-color: #fff7ed; border-color: #fb923c; color: #c2410c; box-shadow: 0 1px 2px rgba(251, 146, 60, 0.1); }
        .mode-btn:disabled { opacity: 0.5; cursor: not-allowed; filter: grayscale(1); }
        
        .premium-banner { background: linear-gradient(90deg, #ea580c, #dc2626); }
    </style>
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body class="h-screen flex flex-col bg-white">

    <!-- LOADING SCREEN -->
    <div id="loading-screen" class="fixed inset-0 z-50 bg-white flex flex-col items-center justify-center">
        <div class="relative w-24 h-24 mb-6">
            <div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div>
            <div class="absolute inset-0 border-4 border-t-orange-600 rounded-full animate-spin"></div>
            <div class="absolute inset-0 flex items-center justify-center font-bold text-2xl text-orange-600">F</div>
        </div>
        <h1 class="text-3xl font-bold text-gray-900 tracking-tight">Fredbear555Ai.com</h1>
        <p class="text-sm text-gray-500 font-mono mt-2 animate-pulse">Initializing Core Systems...</p>
    </div>

    <!-- GOOGLE LOGIN MODAL SIMULATION -->
    <div id="google-modal" class="fixed inset-0 z-[60] bg-black/50 hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white w-full max-w-[400px] rounded-lg shadow-2xl overflow-hidden animate-fade-in relative">
            <div id="google-loading" class="absolute inset-0 bg-white/90 z-10 hidden flex flex-col items-center justify-center">
                <div class="w-10 h-10 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"></div>
                <p class="text-gray-500 font-medium">Verifying Account...</p>
            </div>
            <div class="p-8">
                <div class="flex justify-center mb-6">
                     <svg viewBox="0 0 24 24" class="w-10 h-10"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                </div>
                <h3 class="text-2xl font-medium text-center text-gray-800 mb-2">Sign in with Google</h3>
                <p class="text-center text-base text-gray-600 mb-8">to continue to Fredbear555Ai.com</p>
                
                <div class="space-y-6">
                    <div>
                        <input id="google-email-input" type="email" class="w-full p-3.5 border border-gray-300 rounded focus:border-blue-600 focus:ring-1 focus:ring-blue-600 outline-none transition-colors text-base" placeholder="Email or phone">
                        <p id="google-error" class="text-red-600 text-sm mt-1 hidden flex items-center gap-1">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                            <span>Enter a valid Gmail address</span>
                        </p>
                    </div>
                    
                    <div class="text-sm text-blue-600 font-bold cursor-pointer hover:underline">Forgot email?</div>
                    
                    <div class="text-sm text-gray-500">
                        Not your computer? Use Guest mode to sign in privately. <span class="text-blue-600 font-bold cursor-pointer">Learn more</span>
                    </div>

                    <div class="flex justify-between items-center pt-4">
                         <button type="button" onclick="window.closeGoogleModal()" class="text-blue-600 font-bold text-sm hover:bg-blue-50 px-4 py-2 rounded transition-colors">Create account</button>
                         <button type="button" onclick="window.submitGoogleLogin()" class="bg-blue-600 text-white font-bold text-sm px-6 py-2.5 rounded hover:bg-blue-700 transition-colors shadow-sm">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AUTH SCREEN -->
    <div id="auth-screen" class="fixed inset-0 z-40 bg-gray-50 flex items-center justify-center p-4 hidden overflow-y-auto">
        <div class="w-full max-w-md bg-white border border-gray-200 p-8 rounded-2xl shadow-xl fade-in my-8" id="auth-box">
            <!-- Dynamic Auth Content Injected Here -->
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="main-app" class="flex flex-col h-full hidden fade-in">
        
        <!-- PREMIUM BANNER (Only for Free Users) -->
        <div id="premium-upsell" class="hidden h-10 premium-banner text-white flex items-center justify-center gap-4 text-xs md:text-sm font-bold px-4 shrink-0 cursor-pointer hover:brightness-110 transition-all z-30">
            <span class="animate-pulse">‚ú® UNLOCK DEEP RESEARCH & VIDEO GEN</span>
            <button class="bg-white text-orange-600 px-3 py-0.5 rounded-full text-[10px] uppercase tracking-wider shadow-sm">Get Premium Now</button>
        </div>

        <!-- HEADER -->
        <header class="h-16 border-b border-gray-200 bg-white/90 backdrop-blur-md flex items-center justify-between px-4 shrink-0 z-20 sticky top-0">
            <div class="flex items-center gap-3">
                <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/20 text-white font-bold text-xl">
                    F
                </div>
                <div>
                    <h1 class="text-lg font-bold text-gray-900 leading-tight">
                        Fredbear555Ai.com
                    </h1>
                    <div class="flex items-center gap-2">
                         <span id="tier-badge" class="text-[10px] font-bold px-2 py-0.5 rounded-full bg-gray-100 text-gray-500">LOADING</span>
                         <span class="flex items-center gap-1 text-[10px] text-green-600 font-medium"><div class="w-1.5 h-1.5 bg-green-500 rounded-full"></div> ONLINE</span>
                    </div>
                </div>
            </div>
            <div class="flex gap-2">
                <button id="btn-menu" class="p-2 hover:bg-gray-100 rounded-lg md:hidden">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
                <button id="btn-logout" class="p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors" title="Logout">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                </button>
            </div>
        </header>

        <div class="flex flex-1 overflow-hidden relative">
            
            <!-- SIDEBAR -->
            <aside id="sidebar" class="fixed inset-y-0 left-0 w-72 bg-white border-r border-gray-200 transform -translate-x-full transition-transform duration-300 z-30 md:relative md:translate-x-0 md:w-72 flex flex-col shadow-2xl md:shadow-none">
                <div class="p-4 border-b border-gray-100 flex justify-between items-center md:hidden">
                    <span class="font-bold text-gray-800">Menu</span>
                    <button id="close-sidebar" class="p-1 hover:bg-gray-100 rounded">‚úï</button>
                </div>
                
                <div class="p-4 flex flex-col h-full">
                    <button id="btn-new-chat" class="w-full flex items-center justify-center gap-2 p-3 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-bold shadow-md transition-all mb-6">
                        <span>+</span> New Session
                    </button>
                    
                    <div class="flex items-center justify-between px-2 mb-3">
                        <div class="text-xs font-bold text-gray-400 uppercase tracking-wider">Saved Folders</div>
                        <span class="text-[10px] text-green-600 bg-green-50 px-1.5 py-0.5 rounded">Auto-Saved</span>
                    </div>
                    
                    <div class="space-y-1 overflow-y-auto flex-1 pr-1" id="history-list">
                        <!-- History Items -->
                    </div>

                    <div class="mt-auto pt-4 border-t border-gray-100">
                        <div class="bg-gray-50 rounded-lg p-3">
                            <div class="text-xs font-bold text-gray-500 mb-2">System Status</div>
                            <div class="flex justify-between text-xs text-gray-400 mb-1"><span>Core</span> <span class="font-mono text-gray-600" id="current-model-display">Gemini Hybrid</span></div>
                            <div class="flex justify-between text-xs text-gray-400"><span>Security</span> <span class="font-mono text-green-600">Encrypted</span></div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- CHAT AREA -->
            <main class="flex-1 flex flex-col bg-white relative w-full">
                
                <div id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 scroll-smooth pb-40">
                    <!-- Messages -->
                </div>

                <!-- INPUT AREA -->
                <div class="absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200 p-4 md:p-6 z-10">
                    <div class="max-w-4xl mx-auto space-y-3">
                        
                        <!-- FEATURE TOGGLES -->
                        <div class="flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar" id="mode-selector">
                            <button data-mode="fast" class="mode-btn active flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold bg-gray-50 text-gray-600 hover:bg-gray-100 whitespace-nowrap border border-gray-200">
                                <span class="text-blue-500">‚ö°</span> Fast Research
                            </button>
                            <button data-mode="deep" class="mode-btn flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold bg-gray-50 text-gray-600 hover:bg-gray-100 whitespace-nowrap border border-gray-200">
                                <span class="text-purple-500">üß†</span> Deep Research <span class="ml-1 text-[9px] bg-black text-white px-1 rounded opacity-50">PREM</span>
                            </button>
                            <button data-mode="image" class="mode-btn flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold bg-gray-50 text-gray-600 hover:bg-gray-100 whitespace-nowrap border border-gray-200">
                                <span class="text-pink-500">üé®</span> Make Image
                            </button>
                            <button data-mode="video" class="mode-btn flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold bg-gray-50 text-gray-600 hover:bg-gray-100 whitespace-nowrap border border-gray-200">
                                <span class="text-red-500">üé¨</span> Make Video <span class="ml-1 text-[9px] bg-black text-white px-1 rounded opacity-50">PREM</span>
                            </button>
                            <button data-mode="app" class="mode-btn flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold bg-gray-50 text-gray-600 hover:bg-gray-100 whitespace-nowrap border border-gray-200">
                                <span class="text-emerald-500">üíª</span> Make App/Exe <span class="ml-1 text-[9px] bg-black text-white px-1 rounded opacity-50">PREM</span>
                            </button>
                        </div>

                         <div id="attachment-preview" class="flex gap-2 overflow-x-auto"></div>

                         <div class="relative flex gap-2 items-end bg-gray-50 p-2 rounded-2xl border border-gray-200 focus-within:border-orange-400 focus-within:bg-white focus-within:ring-4 focus-within:ring-orange-500/10 transition-all shadow-inner">
                             <button id="btn-attach" class="p-3 text-gray-400 hover:text-orange-500 hover:bg-orange-50 rounded-xl transition-colors">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                             </button>
                             <button id="btn-mic" class="p-3 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-colors" title="Voice to Text">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
                             </button>
                             <input type="file" id="file-input" class="hidden" accept="image/*">
                             
                             <textarea id="user-input" rows="1" class="flex-1 bg-transparent border-none outline-none p-3 max-h-[120px] resize-none text-sm md:text-base text-gray-800 placeholder-gray-400" placeholder="Ask Fredbear555Ai..."></textarea>
                             
                             <button id="btn-send" class="p-3 bg-orange-600 text-white rounded-xl shadow-lg hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-105 active:scale-95">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                             </button>
                         </div>
                         <div class="flex justify-center">
                            <p class="text-[10px] text-gray-400">Fredbear555Ai.com. Auto-Save Active.</p>
                         </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- APP LOGIC -->
    <script type="module">
        import { GoogleGenAI } from "@google/genai";

        // --- CONSTANTS ---
        const KEYS = ['aiiscoked', 'baddreamasriel', 'kingasgore'];
        const DB_PREFIX = 'fredbear_v4_';
        
        // --- STATE ---
        const state = {
            user: null, // { username, email }
            tier: null, // 'free' | 'premium'
            mode: 'fast', // 'fast', 'deep', 'image', 'video', 'app'
            sessions: [],
            currentSessionId: null,
            attachments: [],
            isGenerating: false,
            captchaAnswer: 0
        };

        // --- DOM ---
        const UI = {
            loading: document.getElementById('loading-screen'),
            auth: document.getElementById('auth-screen'),
            authBox: document.getElementById('auth-box'),
            googleModal: document.getElementById('google-modal'),
            googleEmailInput: document.getElementById('google-email-input'),
            googleError: document.getElementById('google-error'),
            googleLoading: document.getElementById('google-loading'),
            app: document.getElementById('main-app'),
            premiumUpsell: document.getElementById('premium-upsell'),
            chatContainer: document.getElementById('chat-container'),
            historyList: document.getElementById('history-list'),
            userInput: document.getElementById('user-input'),
            btnSend: document.getElementById('btn-send'),
            btnAttach: document.getElementById('btn-attach'),
            btnMic: document.getElementById('btn-mic'),
            fileInput: document.getElementById('file-input'),
            attPreview: document.getElementById('attachment-preview'),
            tierBadge: document.getElementById('tier-badge'),
            modeBtns: document.querySelectorAll('.mode-btn'),
            modelDisplay: document.getElementById('current-model-display'),
            sidebar: document.getElementById('sidebar')
        };

        // --- INIT ---
        const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });

        async function init() {
            // Load Saved Data
            const savedUser = localStorage.getItem(DB_PREFIX + 'current_user');
            if (savedUser) state.user = JSON.parse(savedUser);
            
            state.tier = localStorage.getItem(DB_PREFIX + 'tier');
            state.sessions = JSON.parse(localStorage.getItem(DB_PREFIX + 'sessions') || '[]');
            
            if (state.sessions.length > 0) {
                state.currentSessionId = state.sessions[0].id;
            } else {
                createNewSession();
            }

            // Artificial Loading Delay
            await new Promise(r => setTimeout(r, 1500));
            UI.loading.classList.add('hidden');

            if (state.user && state.tier) {
                enterApp();
            } else {
                showAuth('login');
            }
        }

        // --- AUTH SYSTEM (Vanilla JS Implementation) ---
        function showAuth(view = 'login') {
            UI.auth.classList.remove('hidden');
            UI.app.classList.add('hidden');
            
            if (view === 'login') renderLogin();
            else if (view === 'signup') renderSignup();
            else if (view === 'forgot') renderForgot();
        }

        function generateCaptcha() {
            const n1 = Math.floor(Math.random() * 10) + 1;
            const n2 = Math.floor(Math.random() * 10) + 1;
            state.captchaAnswer = n1 + n2;
            return `${n1} + ${n2} = ?`;
        }

        function renderLogin() {
            UI.authBox.innerHTML = `
                <div class="text-center mb-6">
                    <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-orange-600"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Welcome Back</h2>
                    <p class="text-gray-500 text-sm">Log in to Fredbear555Ai.com</p>
                </div>
                <div class="space-y-4">
                    <input id="login-user" class="w-full p-3 bg-gray-50 border rounded-xl outline-none focus:border-orange-500" placeholder="Username">
                    <input type="password" id="login-pass" class="w-full p-3 bg-gray-50 border rounded-xl outline-none focus:border-orange-500" placeholder="Password">
                    
                    <button type="button" onclick="window.openGoogleModal()" class="w-full p-3 border border-gray-300 rounded-xl flex items-center justify-center gap-2 hover:bg-gray-50 font-medium text-gray-700 transition-colors">
                        <svg class="w-5 h-5" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        Sign in with Google
                    </button>
                    
                    <button type="button" onclick="window.tryLogin()" class="w-full p-3 bg-gray-900 text-white font-bold rounded-xl hover:bg-black transition-all shadow-lg">Log In</button>
                    
                    <div class="flex justify-between text-sm mt-4">
                        <span onclick="window.showForgot()" class="text-orange-600 cursor-pointer hover:underline">Forgot Password?</span>
                        <span onclick="window.showSignup()" class="text-gray-500 cursor-pointer hover:text-gray-800">Create Account</span>
                    </div>
                </div>
            `;
        }

        function renderSignup() {
            const captchaQ = generateCaptcha();
            UI.authBox.innerHTML = `
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Create Account</h2>
                    <p class="text-gray-500 text-sm">Join the Hybrid Intelligence</p>
                </div>
                <div class="space-y-3">
                    <input id="reg-user" class="w-full p-3 bg-gray-50 border rounded-xl outline-none" placeholder="Username">
                    <input id="reg-email" class="w-full p-3 bg-gray-50 border rounded-xl outline-none" placeholder="Google Email (Recommended)">
                    <input type="password" id="reg-pass" class="w-full p-3 bg-gray-50 border rounded-xl outline-none" placeholder="Password">
                    
                    <div class="bg-blue-50 p-3 rounded-xl border border-blue-100">
                        <label class="block text-xs font-bold text-blue-800 mb-1">Anti-Bot: ${captchaQ}</label>
                        <input id="reg-captcha" type="number" class="w-full p-2 border rounded-lg text-center" placeholder="Answer">
                    </div>

                    <button type="button" onclick="window.trySignup()" class="w-full p-3 bg-orange-600 text-white font-bold rounded-xl hover:bg-orange-700 transition-all shadow-lg">Sign Up & Save</button>
                    <div class="text-center text-sm mt-2">
                        <span onclick="window.showLogin()" class="text-gray-500 cursor-pointer hover:text-gray-800">Back to Login</span>
                    </div>
                </div>
            `;
        }

        function renderForgot() {
            UI.authBox.innerHTML = `
                 <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-gray-900">Reset Password</h2>
                    <p class="text-gray-500 text-sm">Enter Google Email to verify</p>
                </div>
                <div class="space-y-4" id="forgot-form">
                    <input id="forgot-email" class="w-full p-3 bg-gray-50 border rounded-xl outline-none" placeholder="your@email.com">
                    <button type="button" onclick="window.sendResetCode()" class="w-full p-3 bg-gray-800 text-white font-bold rounded-xl">Send Verification Code</button>
                    <span onclick="window.showLogin()" class="block text-center text-sm text-gray-500 cursor-pointer mt-2">Cancel</span>
                </div>
            `;
        }

        // --- GLOBAL AUTH HANDLERS ---
        window.showLogin = () => renderLogin();
        window.showSignup = () => renderSignup();
        window.showForgot = () => renderForgot();

        // NEW GOOGLE MODAL HANDLERS
        window.openGoogleModal = () => {
            UI.googleModal.classList.remove('hidden');
            UI.googleEmailInput.value = '';
            UI.googleError.classList.add('hidden');
            UI.googleLoading.classList.add('hidden');
        };

        window.closeGoogleModal = () => {
             UI.googleModal.classList.add('hidden');
        };

        window.submitGoogleLogin = () => {
            const email = UI.googleEmailInput.value.trim();
            const emailRegex = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;

            if (!email || !emailRegex.test(email)) {
                UI.googleError.classList.remove('hidden');
                return;
            }

            // Simulate Network Request
            UI.googleLoading.classList.remove('hidden');
            setTimeout(() => {
                state.user = { username: email.split('@')[0], email: email };
                saveUser();
                window.closeGoogleModal();
                renderTierSelect();
            }, 1500);
        };

        window.tryLogin = () => {
            const u = document.getElementById('login-user').value;
            const p = document.getElementById('login-pass').value;
            if(!u || !p) return alert("Enter credentials");
            
            const db = JSON.parse(localStorage.getItem(DB_PREFIX + 'users_db') || '{}');
            if (db[u] && db[u].password === p) {
                state.user = { username: u, email: db[u].email };
                saveUser();
                if (localStorage.getItem(DB_PREFIX + 'tier')) {
                    init(); 
                } else {
                    renderTierSelect();
                }
            } else {
                alert("Invalid Username or Password.");
            }
        };

        window.trySignup = () => {
            const u = document.getElementById('reg-user').value;
            const e = document.getElementById('reg-email').value;
            const p = document.getElementById('reg-pass').value;
            const c = document.getElementById('reg-captcha').value;

            if (parseInt(c) !== state.captchaAnswer) return alert("Captcha Failed. Anti-Bot Triggered.");
            if (!u || !p || !e) return alert("All fields required.");

            const db = JSON.parse(localStorage.getItem(DB_PREFIX + 'users_db') || '{}');
            if (db[u]) return alert("Username taken.");

            db[u] = { password: p, email: e };
            localStorage.setItem(DB_PREFIX + 'users_db', JSON.stringify(db));
            
            state.user = { username: u, email: e };
            saveUser();
            renderTierSelect();
        };

        window.sendResetCode = () => {
            const email = document.getElementById('forgot-email').value;
            if(!email) return;
            const form = document.getElementById('forgot-form');
            form.innerHTML = `
                <div class="text-green-600 text-center font-bold mb-4">Code sent to ${email} (Sim: 1234)</div>
                <input id="reset-code" class="w-full p-3 border rounded-xl mb-2" placeholder="Enter Code">
                <input id="new-pass" type="password" class="w-full p-3 border rounded-xl mb-2" placeholder="New Password">
                <button type="button" onclick="window.confirmReset('${email}')" class="w-full p-3 bg-orange-600 text-white font-bold rounded-xl">Update Password</button>
            `;
        };

        window.confirmReset = (email) => {
            const code = document.getElementById('reset-code').value;
            const pass = document.getElementById('new-pass').value;
            if (code !== '1234') return alert("Wrong code");
            
            // Find user by email
            const db = JSON.parse(localStorage.getItem(DB_PREFIX + 'users_db') || '{}');
            let foundUser = null;
            for (let u in db) {
                if (db[u].email === email) foundUser = u;
            }

            if (foundUser) {
                db[foundUser].password = pass;
                localStorage.setItem(DB_PREFIX + 'users_db', JSON.stringify(db));
                alert("Password Updated. Please Login.");
                renderLogin();
            } else {
                alert("Email not found in database.");
            }
        };

        function saveUser() {
            localStorage.setItem(DB_PREFIX + 'current_user', JSON.stringify(state.user));
        }

        // --- TIER SELECTION ---
        function renderTierSelect() {
            UI.authBox.innerHTML = `
                <h2 class="text-xl font-bold mb-4 text-center">Select Your Plan</h2>
                <div class="space-y-3">
                    <button type="button" onclick="window.selectTier('free')" class="w-full p-4 border rounded-xl hover:border-orange-500 text-left hover:bg-orange-50 transition-all group">
                        <div class="font-bold text-gray-800 flex justify-between">Free Tier <span class="text-gray-400 group-hover:text-orange-500">‚Üí</span></div>
                        <div class="text-xs text-gray-500">Fast Research ‚Ä¢ Standard Images ‚Ä¢ Ads</div>
                    </button>
                    <button type="button" onclick="window.selectTier('premium')" class="w-full p-4 border border-orange-200 bg-gradient-to-r from-orange-50 to-white rounded-xl text-left hover:shadow-md transition-all relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-orange-600 text-white text-[10px] px-2 py-1 font-bold">RECOMMENDED</div>
                        <div class="font-bold text-orange-900">Premium</div>
                        <div class="text-xs text-orange-700">Deep Research ‚Ä¢ 4K Images ‚Ä¢ Video Gen</div>
                    </button>
                </div>
            `;
        }

        window.selectTier = (t) => {
            if (t === 'free') {
                // Free flow
                UI.authBox.innerHTML = `
                    <h3 class="font-bold text-lg mb-2">Free Activation</h3>
                    <p class="text-xs text-gray-500 mb-4">Please subscribe to our channel to support us.</p>
                    <button type="button" onclick="window.open('https://youtube.com/@Fredbear555')" class="w-full p-3 bg-red-600 text-white rounded-xl mb-2 font-bold flex items-center justify-center gap-2">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                        Subscribe @Fredbear555
                    </button>
                    <div id="verify-sub-btn" class="hidden animate-fade-in">
                        <button type="button" onclick="window.finalizeAuth('free')" class="w-full p-3 bg-green-600 text-white rounded-xl font-bold mt-2">Activate Free Tier</button>
                    </div>
                `;
                setTimeout(() => document.getElementById('verify-sub-btn').classList.remove('hidden'), 2000);
            } else {
                // Premium flow
                UI.authBox.innerHTML = `
                    <h3 class="font-bold text-lg mb-2">Premium Verification</h3>
                    <p class="text-xs text-gray-500 mb-4">Complete the task to get your key.</p>
                    <a href="https://sub4unlock.com/SL/1723051" target="_blank" class="block w-full p-3 bg-blue-50 text-blue-600 rounded-xl mb-4 text-center font-bold border border-blue-100 hover:bg-blue-100">Get Key Here</a>
                    <input id="p-key" class="w-full p-3 border rounded-xl mb-2" placeholder="Paste Key (e.g., aiiscoked)">
                    <button type="button" onclick="window.checkPremKey()" class="w-full p-3 bg-orange-600 text-white rounded-xl font-bold">Unlock Premium</button>
                `;
            }
        };

        window.checkPremKey = () => {
            const k = document.getElementById('p-key').value.toLowerCase().trim();
            if (KEYS.includes(k)) window.finalizeAuth('premium');
            else alert("Invalid Key. Please complete the task.");
        };

        window.finalizeAuth = (t) => {
            state.tier = t;
            localStorage.setItem(DB_PREFIX + 'tier', t);
            enterApp();
        };

        // --- APP ENTRY ---
        function enterApp() {
            UI.auth.classList.add('hidden');
            UI.app.classList.remove('hidden');
            updateUIForTier();
            renderSidebar();
            renderChat();
            setupVoiceRecognition();
        }

        // --- VOICE RECOGNITION ---
        function setupVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                recognition.onstart = () => {
                    UI.btnMic.classList.add('text-red-600', 'bg-red-50', 'animate-pulse');
                };
                recognition.onend = () => {
                    UI.btnMic.classList.remove('text-red-600', 'bg-red-50', 'animate-pulse');
                };
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    UI.userInput.value += (UI.userInput.value ? ' ' : '') + transcript;
                    UI.userInput.focus();
                };

                UI.btnMic.onclick = () => recognition.start();
            } else {
                UI.btnMic.style.display = 'none';
            }
        }

        function updateUIForTier() {
            const isPrem = state.tier === 'premium';
            UI.tierBadge.textContent = isPrem ? "PREMIUM V4.0" : "FREE V4.0";
            UI.tierBadge.className = isPrem 
                ? "text-[10px] font-bold px-2 py-0.5 rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-sm"
                : "text-[10px] font-bold px-2 py-0.5 rounded-full bg-gray-200 text-gray-600";
            
            // Show/Hide Upsell
            if (!isPrem) UI.premiumUpsell.classList.remove('hidden');
            else UI.premiumUpsell.classList.add('hidden');

            // Update disabled states for buttons
            UI.modeBtns.forEach(btn => {
                const mode = btn.dataset.mode;
                if ((mode === 'deep' || mode === 'video' || mode === 'app') && !isPrem) {
                    btn.disabled = true;
                    btn.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    btn.disabled = false;
                    btn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            });
        }

        // --- UPSOLL CLICK ---
        UI.premiumUpsell.onclick = () => {
            if (confirm("Upgrade to Premium for Deep Research, Video & App Gen?")) {
                 UI.authBox.innerHTML = ''; 
                 UI.app.classList.add('hidden');
                 UI.auth.classList.remove('hidden');
                 renderTierSelect();
            }
        };

        // --- MODE SELECTION ---
        UI.modeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.disabled) {
                    alert("Get Premium to unlock this feature!");
                    return;
                }
                state.mode = btn.dataset.mode;
                UI.modeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Update placeholder
                let ph = "Ask Fredbear555Ai...";
                if (state.mode === 'deep') ph = "Enter complex topic for Deep Research (5+ Sources + AI Analysis)...";
                if (state.mode === 'image') ph = "Describe image (Mention famous people for auto-enhance)...";
                if (state.mode === 'video') ph = "Describe video scene...";
                if (state.mode === 'app') ph = "Describe the App or Exe you want to create (e.g., 'Snake game in Python')...";
                UI.userInput.placeholder = ph;

                // Update Status
                if (state.mode === 'fast') UI.modelDisplay.innerText = "Gemini Flash (Web)";
                if (state.mode === 'deep') UI.modelDisplay.innerText = "Gemini Pro 1.5 (Thinking)";
                if (state.mode === 'image') UI.modelDisplay.innerText = "Imagen 3 Pro";
                if (state.mode === 'video') UI.modelDisplay.innerText = "Veo 3.1 Video";
                if (state.mode === 'app') UI.modelDisplay.innerText = "Gemini Pro (Architect)";
            });
        });

        // --- CHAT & FOLDER LOGIC ---
        function createNewSession() {
            const id = Date.now().toString();
            state.sessions.unshift({ id, title: 'New Folder', messages: [], timestamp: Date.now() });
            state.currentSessionId = id;
            saveSessions();
            renderSidebar();
            renderChat();
        }

        function saveSessions() {
            localStorage.setItem(DB_PREFIX + 'sessions', JSON.stringify(state.sessions));
        }

        function renderSidebar() {
            UI.historyList.innerHTML = state.sessions.map(s => `
                <div onclick="window.loadSession('${s.id}')" class="group flex items-center justify-between p-2.5 rounded-lg cursor-pointer ${s.id === state.currentSessionId ? 'bg-orange-50 text-orange-900 font-medium border border-orange-200' : 'text-gray-600 hover:bg-gray-50 border border-transparent'} text-sm transition-all mb-1">
                    <div class="flex items-center gap-2 overflow-hidden">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                        <span class="truncate">${s.title}</span>
                    </div>
                </div>
            `).join('');
        }

        window.loadSession = (id) => {
            state.currentSessionId = id;
            renderSidebar();
            renderChat();
            if(window.innerWidth < 768) UI.sidebar.classList.add('-translate-x-full');
        };

        function renderChat() {
            const session = state.sessions.find(s => s.id === state.currentSessionId);
            if (!session) return;
            
            if (session.messages.length === 0) {
                UI.chatContainer.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-full opacity-40">
                        <div class="text-6xl mb-4">üêª</div>
                        <h2 class="text-2xl font-bold">Fredbear555Ai.com</h2>
                        <p class="text-center mt-2">Select a mode below to start.</p>
                    </div>
                `;
                return;
            }

            UI.chatContainer.innerHTML = session.messages.map(msg => {
                const isUser = msg.role === 'user';
                let content = msg.content;
                
                // Markdown Parsing
                if (!isUser) {
                    content = content
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>')
                        .replace(/`([^`]+)`/g, '<code>$1</code>')
                        .replace(/\n/g, '<br>');
                }

                let mediaHtml = '';
                if (msg.image) mediaHtml = `<img src="${msg.image}" class="max-w-xs md:max-w-md rounded-xl border border-gray-200 my-2 shadow-sm cursor-pointer hover:scale-[1.01] transition-transform">`;
                if (msg.video) mediaHtml = `<video controls src="${msg.video}" class="max-w-xs md:max-w-md rounded-xl border border-gray-200 my-2 shadow-sm"></video>`;

                return `
                    <div class="flex w-full ${isUser ? 'justify-end' : 'justify-start'} animate-fade-in">
                        <div class="max-w-[90%] md:max-w-[80%]">
                             <div class="flex items-end gap-2 ${isUser ? 'flex-row-reverse' : ''}">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${isUser ? 'bg-gray-200' : 'bg-gradient-to-br from-orange-500 to-red-600 text-white shadow-md'}">
                                    ${isUser ? '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>' : 'F'}
                                </div>
                                <div>
                                    ${mediaHtml}
                                    ${content ? `<div class="p-3 md:p-4 rounded-2xl text-sm md:text-base shadow-sm ${isUser ? 'bg-gray-100 text-gray-800 rounded-tr-none' : 'bg-white border border-gray-100 text-gray-800 rounded-tl-none md-content shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)]'}">${content}</div>` : ''}
                                </div>
                             </div>
                        </div>
                    </div>
                `;
            }).join('');
            UI.chatContainer.scrollTop = UI.chatContainer.scrollHeight;
        }

        // --- SEND LOGIC ---
        UI.btnSend.addEventListener('click', handleSend);
        UI.userInput.addEventListener('keydown', (e) => { if(e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handleSend(); } });

        async function handleSend() {
            if (state.isGenerating) return;
            const text = UI.userInput.value.trim();
            if (!text) return;

            state.isGenerating = true;
            UI.btnSend.disabled = true;
            UI.userInput.value = '';

            const session = state.sessions.find(s => s.id === state.currentSessionId);
            session.messages.push({ role: 'user', content: text });
            
            // Auto-Title
            if (session.messages.length === 1) {
                const icon = state.mode === 'image' ? 'üé®' : state.mode === 'video' ? 'üé¨' : state.mode === 'app' ? 'üíª' : 'üí¨';
                session.title = `${icon} ${text.substring(0, 15)}...`;
                renderSidebar();
            }
            renderChat();

            // Loading Msg
            session.messages.push({ role: 'model', content: `<span class="animate-pulse flex items-center gap-2">Processing with ${state.mode.toUpperCase()} Engine <span class="w-2 h-2 bg-orange-500 rounded-full animate-bounce"></span></span>` });
            renderChat();

            try {
                if (state.mode === 'fast') await runFastResearch(session, text);
                else if (state.mode === 'deep') await runDeepResearch(session, text);
                else if (state.mode === 'image') await runImageGen(session, text);
                else if (state.mode === 'video') await runVideoGen(session, text);
                else if (state.mode === 'app') await runAppGen(session, text);
            } catch (err) {
                console.error(err);
                session.messages[session.messages.length-1].content = `**System Error:** ${err.message}. Please try again.`;
            }

            state.isGenerating = false;
            UI.btnSend.disabled = false;
            saveSessions();
            renderChat();
        }

        // 1. FAST RESEARCH
        async function runFastResearch(session, prompt) {
            const response = await ai.models.generateContent({
                model: 'gemini-2.5-flash',
                contents: prompt,
                config: {
                    tools: [{ googleSearch: {} }],
                    systemInstruction: "You are Fredbear555Ai (Fast Mode). Provide quick, public research-backed answers. Be concise."
                }
            });
            session.messages[session.messages.length-1].content = response.text;
        }

        // 2. DEEP RESEARCH
        async function runDeepResearch(session, prompt) {
            const deepSystemPrompt = `
                You are Fredbear555Ai in DEEP RESEARCH MODE.
                
                PROTOCOL:
                1.  **SEARCH PHASE**: Use Google Search to find at least 5 distinct answers/perspectives from reputable public sources.
                2.  **AI SYNTHESIS PHASE**: Generate 3 internal AI perspectives/hypotheses based on logic and training data.
                3.  **CROSS-VERIFICATION**: Compare the public search results with your internal AI perspectives.
                4.  **TRUST FILTER**: Prioritize trusted/verified sources.
                5.  **FINAL OUTPUT**: Provide a comprehensive answer that synthesizes all 8 perspectives (5 human + 3 AI). List the sources used.
            `;

            const response = await ai.models.generateContent({
                model: 'gemini-3-pro-preview',
                contents: prompt,
                config: {
                    tools: [{ googleSearch: {} }],
                    systemInstruction: deepSystemPrompt,
                    thinkingConfig: { thinkingBudget: 4096 }
                }
            });
            
            let text = response.text;
            const chunks = response.candidates?.[0]?.groundingMetadata?.groundingChunks;
            if (chunks) {
                text += "\n\n**Verified Sources:**\n" + chunks.map(c => `- [${c.web?.title || 'Source'}](${c.web?.uri})`).join('\n');
            }
            
            session.messages[session.messages.length-1].content = text;
        }

        // 3. IMAGE GENERATION
        async function runImageGen(session, prompt) {
            const enhancer = await ai.models.generateContent({
                model: 'gemini-2.5-flash',
                contents: `Rewrite this image prompt to be "Best Quality, 8k, Photorealistic". If a famous person is mentioned, keep their name prominent and accurate. Prompt: "${prompt}"`
            });
            const enhancedPrompt = enhancer.text;

            const response = await ai.models.generateContent({
                model: 'gemini-3-pro-image-preview',
                contents: { parts: [{ text: enhancedPrompt }] }
            });

            let imgData = null;
            for (const part of response.candidates[0].content.parts) {
                if (part.inlineData) imgData = part.inlineData.data;
            }

            if (imgData) {
                session.messages[session.messages.length-1].content = `**Generated Image**\nPrompt: _${enhancedPrompt}_`;
                session.messages[session.messages.length-1].image = `data:image/png;base64,${imgData}`;
            } else {
                session.messages[session.messages.length-1].content = "Failed to generate image.";
            }
        }

        // 4. VIDEO GENERATION
        async function runVideoGen(session, prompt) {
            const enhancer = await ai.models.generateContent({
                model: 'gemini-2.5-flash',
                contents: `Rewrite this video prompt to be cinematic, 1080p, high motion fidelity, professional lighting. Prompt: "${prompt}"`
            });
            const enhancedPrompt = enhancer.text;

            let operation = await ai.models.generateVideos({
                model: 'veo-3.1-generate-preview',
                prompt: enhancedPrompt,
                config: { numberOfVideos: 1, resolution: '1080p', aspectRatio: '16:9' }
            });

            let attempts = 0;
            while (!operation.done && attempts < 60) {
                session.messages[session.messages.length-1].content = `Rendering Video... ${(attempts * 10) / 6}% (This takes time)`;
                renderChat();
                await new Promise(resolve => setTimeout(resolve, 5000));
                operation = await ai.operations.getVideosOperation({operation: operation});
                attempts++;
            }

            const vidUri = operation.response?.generatedVideos?.[0]?.video?.uri;
            if (vidUri) {
                const vidResp = await fetch(`${vidUri}&key=${process.env.API_KEY}`);
                const blob = await vidResp.blob();
                const url = URL.createObjectURL(blob);
                
                session.messages[session.messages.length-1].content = `**Generated Video**\nPrompt: _${enhancedPrompt}_`;
                session.messages[session.messages.length-1].video = url;
            } else {
                session.messages[session.messages.length-1].content = "Video generation timed out.";
            }
        }

        // 5. APP/EXE GENERATION
        async function runAppGen(session, prompt) {
             const appSystemPrompt = `
                You are Fredbear555Ai's Senior Software Architect.
                The user wants to build a standalone Application or Executable (.exe).
                
                YOUR TASK:
                1. Analyze the requirements.
                2. Choose the best language (Python + Tkinter/PyQt is usually best for quick GUIs, C# for Windows, HTML/JS for Web).
                3. Write the COMPLETE, ERROR-FREE source code.
                4. Provide the EXACT terminal commands to compile it into an executable (e.g., 'pip install pyinstaller', 'pyinstaller --onefile app.py').
                5. Be professional and detailed. Wrap code in markdown code blocks.
            `;
            
            const response = await ai.models.generateContent({
                model: 'gemini-3-pro-preview',
                contents: prompt,
                config: {
                    systemInstruction: appSystemPrompt,
                    thinkingConfig: { thinkingBudget: 4096 }
                }
            });
            
            session.messages[session.messages.length-1].content = response.text;
        }

        // --- GLOBAL UI HANDLERS ---
        document.getElementById('btn-logout').onclick = () => {
            if(confirm("Log out?")) {
                localStorage.removeItem(DB_PREFIX + 'current_user');
                location.reload();
            }
        };

        document.getElementById('btn-new-chat').onclick = createNewSession;
        document.getElementById('btn-menu').onclick = () => UI.sidebar.classList.remove('-translate-x-full');
        document.getElementById('close-sidebar').onclick = () => UI.sidebar.classList.add('-translate-x-full');

        init();
    </script>
</body>
</html>